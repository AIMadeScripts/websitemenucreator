<!DOCTYPE html>
<html>
  <head>
    <title>Menu Creator</title>
    <meta charset="UTF-8" />
    <style>
      body {
          font-size: 14px;
          line-height: 1.4;
          color: #c7c7c7;
          background: #282828;
          margin: 0;
          font-family: Verdana, Arial, Sans-Serif;
          min-width: 320px;
      }
      h1 {
        text-align: center;
        font-size: 32px;
        margin-top: 0;
        margin-bottom: 30px;
        color: #4d2f5d;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
      }

      label {
        font-size: 20px;
        text-align: center;
        margin-bottom: 10px;
        padding: 10px;
        color: white;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
      }

      label[for="title"],
      input[type="text"][id="title"],
      #menu-options {
        color: #ffff;
        display: block;
        margin: 0 auto;
        margin-bottom: 10px;
        max-width: 500px;
      }

      input[type=text],
      #menu-options label {
            min-width: 220px;
            background: #2a2a2a;
            padding: 8px;
            border: 1px solid #222;
            color: #eeeeee;
            font-size: 13px;
        }
        
       menu-options label,
      .new-option {
        border: 1px solid #4d2f5d;
        padding: 10px;
        margin-bottom: 20px;
        border-radius: 10px;
        margin-top: 50px;
      }
      
      menu-options label, .new-option {
       border: 1px solid #4d2f5d;
       padding: 10px;
       margin-bottom: 20px;
       border-radius: 10px;
       margin-top: 50px;
     }
      menu-options label::before {
       content: none;
     }


      #menu-options {
        display: flex;
        justify-content: center; /* Add this line */
        flex-wrap: wrap;
      }
      
      #menu-options label {
        background-color: #4d2f5d;
        padding: 10px;
        margin-right: 30px;
        margin-bottom: 0px;
        font-family: Verdana, Arial, Sans-Serif;
        color: #fff;
        font-size: 18px;
        border-radius: 10px;
        border: 1px solid #222;
        width: 80%;
        margin-top: 10px;
        box-shadow: 0px 3px 5px rgb(0 0 0 / 10%);
        text-align: center;
        
        display: block;
        margin: 0 auto;
      }
      
      /* Add these rules */
      #menu-options .box {
        background-color: #ccc;
        width: 100px;
        height: 100px;
        margin: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
      }      
      
      #menu-options ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      
      button {
        background-color: #000000;
        border: none;
        color: white;
        padding: 10px;
        text-align: center;
        font-size: 18px;
        margin-top: 10px;
        border-radius: 10px;
        box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
        margin-right: 20px;
      }

      button:hover {
        background-color: #4d2f5d;
      }

      textarea,
      input[type="text"] {
        font-family: Verdana, Arial, Sans-Serif;
        color: #fff;
        padding: 10px;
        font-size: 18px;
        border-radius: 10px;
        border: 1px solid #222;
        width: 80%;
        margin-top: 10px;
        box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.1);
        background-color: #2a2a2a;
      }

      textarea {
        height: 600px;
        width: 80%;
        font-family: 'Arial', sans-serif;
      }

      .container {
        display: flex;
        flex-direction: column;
        align-items: left;
        justify-content: center;
        margin-top: 50px;
      }
      
      textarea#script {
        width: 70%;
        margin-left: 10%;
        /* remaining styles */
      }      
      
      .button-container {
        display: flex;
        margin-top: 20px;
      }
.dropdown {
  position: fixed;
  top: 20px;
  left: 20px;
}

.dropbtn {
  background-color: #000000;
  color: white;
  padding: 10px;
  font-size: 18px;
  border: none;
  border-radius: 10px;
  box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.1);
  cursor: pointer;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #0000;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 10px 16px; /* modified padding */
  text-decoration: none;
  display: block;
  width: 100%; /* added width */
}

.dropdown-content a:hover {
  background-color: #4d2f5d;
}
    /* center the image */
    img {
      display: block;
      margin: 0 auto;
    }

    </style>  
    </head>
<body>
  <img src="https://i.imgur.com/TBHSQOg.png" alt="Menu Creator">
  <div class="dropdown">
    <button class="dropbtn">Options</button>
    <div class="dropdown-content">
    <button onclick="addOption()">Add menu option</button>
    <button onclick="generateScript()">Generate Script</button>
    <button onclick="resetOptions()">Reset options</button>
    <button onclick="copyScript()">Copy Script</button>
    </div>
  </div>
</div>
    <h1>Menu Creator</h1>
    <div class="form-group">
      <label for="title">Enter a title for your menu:</label>
      <input type="text" id="title" name="title" placeholder="My Awesome v1000!!!!">
    </div>
    <div id="menu-options" class="form-group">
      <div class="menu-option">
        <label for="option">Menu option:</label>
        <input type="text" id="option" name="option" placeholder="Example: Ping a Website">
      </div>
      <div class="command">
        <label for="command">Command:</label>
        <input type="text" id="command" name="command" placeholder="Command like ping google.com">
      </div>
    </div>
    <form id="menu-form">
      <div class="form-group">
        <label for="script">Script:</label>
        <textarea id="script" class="textarea" rows="20" cols="80"></textarea>
      </div>
    </form>
  </div>
        <script>
      var optionCount = 0;
      var options = [];
      // Get the dropdown button and content
      var dropdownBtn = document.querySelector(".dropbtn");
      var dropdownContent = document.querySelector(".dropdown-content");
      
      // Add a click event listener to the button
      dropdownBtn.addEventListener("click", function() {
        // Toggle the display of the dropdown content
        dropdownContent.style.display === "block" ? 
          dropdownContent.style.display = "none" : 
          dropdownContent.style.display = "block";
      });      
      
      function copyScript() {
        var copyText = document.getElementById("script");
        copyText.select();
        document.execCommand("copy");
      }
      
      var menuOptionNumber = 0;
      
      function addOption() {
        optionCount++;
        menuOptionNumber++;
        var optionName = document.getElementById("option").value;
        var command = document.getElementById("command").value;
        options.push({ name: optionName, command: command });
        var optionDiv = document.createElement("div");
        optionDiv.setAttribute("id", "optionDiv" + optionCount);
        // Update the optionDiv.innerHTML to include the menuOptionNumber variable
        optionDiv.innerHTML =
          '<label for="option' +
          optionCount +
          '">Menu option ' +
          menuOptionNumber +
          ':</label>' +
          '<input type="text" id="option' +
          optionCount +
          '" name="option' +
          optionCount +
          '">' +
          '<label for="command' +
          optionCount +
          '">Command ' +
          menuOptionNumber +
          ':</label>' +
          '<input type="text" id="command' +
          optionCount +
          '" name="command' +
          optionCount +
          '">' +
          '<button id="deleteOption' +
          optionCount +
          '" onclick="deleteOption(' +
          optionCount +
          ')">Delete</button>';      
        var optionContainer = document.createElement("div");
        optionContainer.classList.add("option-container", "new-option");
        optionContainer.appendChild(optionDiv);
        document.getElementById("menu-options").appendChild(optionContainer);
      }

      function deleteOption(optionNum) {
        // Remove the option from the options array
        options.splice(optionNum - 1, 1);
        // Remove the option container from the HTML
        var optionContainer = document.getElementById("optionDiv" + optionNum).parentNode;
        optionContainer.parentNode.removeChild(optionContainer);
        // Update the remaining option numbers
        var optionContainers = document.querySelectorAll('.option-container.new-option');
        menuOptionNumber = optionContainers.length;
        for (var i = 0; i < optionContainers.length; i++) {
          var optionNumLabel = optionContainers[i].querySelector('label[for^="option"]');
          var commandNumLabel = optionContainers[i].querySelector('label[for^="command"]');
          optionNumLabel.textContent = 'Menu option ' + (i + 1) + ':';
          commandNumLabel.textContent = 'Command ' + (i + 1) + ':';
          optionContainers[i].querySelector('button').id = 'deleteOption' + (i + 1);
        }
      }      
      function generateScript() {
        var title = document.getElementById("title").value.trim();
        if (!title) {
          alert("Please enter a title for your menu.");
          return;
        }
      
        var menuOptions = document.querySelectorAll("#menu-options .menu-option input[type=text]");
        for (var i = 0; i < menuOptions.length; i++) {
          var menuOption = menuOptions[i].value.trim();
          if (!menuOption) {
            alert("Please enter a menu option for option " + (i + 1) + ".");
            return;
          }
        }
      
        var commands = document.querySelectorAll("#menu-options .command input[type=text]");
        for (var j = 0; j < commands.length; j++) {
          var command = commands[j].value.trim();
          if (!command) {
            alert("Please enter a command for menu option " + (j + 1) + ".");
            return;
          }
        }          
          // Retrieve the default option and command inputs
          var defaultOption = document.getElementById("option").value;
          var defaultCommand = document.getElementById("command").value;
          var defaultOption_formatted = defaultOption.replace(/[^a-zA-Z0-9 ]/g, "").replace(/\s+/g, "_");
          var regex = /\$[a-zA-Z0-9]+/g;
          var defaultMatches = defaultCommand.match(regex) || [];
          var inputMatches = [];
          var allMatches = [];
          for (var i = 1; i <= optionCount; i++) {
              var optionName = document.getElementById("option" + i).value;
              var commandInput = document.getElementById("command" + i).value;
              var command = commandInput;
              var optionName_formatted = optionName.replace(/[^a-zA-Z0-9 ]/g, "").replace(/\s+/g, "_");
              inputMatches = inputMatches.concat(commandInput.match(regex) || []);
              script += "def " + optionName_formatted + "():\n";
              script += "    print('You selected " + optionName + "')\n";
              var replacedInput = commandInput.replace(/\$([a-zA-Z0-9]+)/g, '{$1}');
              script += "    " + optionName_formatted + " = f\"" + replacedInput + "\"\n";
              script += "    try:\n";
              script += "        os.system(" + optionName_formatted + ")\n";
              script += "    except KeyboardInterrupt:\n";
              script += "        print('" + optionName + " interrupted by user')\n";
              script += "    input('Press enter to return to menu...')\n\n";
          }
          allMatches = defaultMatches.concat(inputMatches).map(function(match) {
              return match.replace('$', '');
          });
          var uniqueMatches = [...new Set(allMatches)];
          var script = "#!/usr/bin/env python\n\n";
          script += "###===Import Modules Go Here===###\n";
          script += "import os\n\n";
          script += "###===Setting your variables to blank values===###\n";
          if (allMatches.join("")) { // Check if allMatches.join has a value
              script += allMatches.join(" = \"\"\n") + " = \"\"\n";
          }
          script += "###===Separator Function For Pretty Menu===###\n";
          script += "def print_separator():\n";
          script += "    print(\"=\" * 50)\n\n";
          script += "###===Your Viewable Menu===###\n";
          script += "def menu():\n";
          script += "    clear_screen()\n";
          if (title) {
              script += "    print('" + title + "')\n";
          }
          if (uniqueMatches.join("")) { // Check if allMatches.join has a value
              script += "    print('" + "Your script requires these variables to bet set" + " " + uniqueMatches.join(", ") + "')\n";
          }        script += "    print_separator()\n";
        // Include the default option and command in the script
        script += "    print('" + "1. " + defaultOption + "')\n";
        // Loop through the dynamically added menu options and include them in the script
        for (var i = 1; i <= optionCount; i++) {
          var optionName = document.getElementById("option" + i).value;
          var command = document.getElementById("command" + i).value;
          script += "    print('" + (i+1) + ". " + optionName + "')\n";
        }
        if (uniqueMatches.length > 0) { // Check if uniqueMatches has any values
          script += "    ";
          for (var j = 0; j < uniqueMatches.length; j++) {
            script += "print(f'set_" + uniqueMatches[j] + " | Variable currently set as {" + uniqueMatches[j] +"}')\n    ";
            script += "print('(exit) Exit')\n\n";
          }
        } else { // uniqueMatches is empty
          script += "    print('(exit) Exit')\n\n";
        }        script += "###===Making Clear Screen Work On Windows And Linux===###\n";
        script += "def clear_screen():\n";
        script += "    os.system('cls' if os.name == 'nt' else 'clear')\n\n";
        script += "###===When You Choose An Option It Runs One Of These===###\n";
        script += "def " + defaultOption_formatted + "():\n";
        var command = defaultCommand;
        var escapedCommand = "";
        for (var i = 0; i < command.length; i++) {
          var c = command.charAt(i);
          if (c == "\"") {
            escapedCommand += "\\\"";
          } else if (c == "\\") {
            escapedCommand += "\\\\";
          } else {
            escapedCommand += c;
          }
        }        
        script += "    print('You selected " + defaultOption + "')\n";
        script += "    " + defaultOption_formatted + " = f\"" + escapedCommand + "\"\n";
        script += "    try:\n";
        script += "        os.system(" + defaultOption_formatted + ")\n";
        script += "    except KeyboardInterrupt:\n";
        script += "        print('" + defaultOption + " interrupted by user')\n";
        script += "    input('Press enter to return to menu...')\n\n";
        for (var i = 1; i <= optionCount; i++) {
            var optionName = document.getElementById("option" + i).value;
            var commandInput = document.getElementById("command" + i).value;
            var command = commandInput.value;
            var optionName_formatted = optionName.replace(/[^a-zA-Z0-9 ]/g, "").replace(/\s+/g, "_");
            var replacedInput = commandInput.replace(/\$([a-zA-Z0-9]+)/g, '{$1}');
            var command2 = replacedInput;
            var escapedCommand2 = "";
            for (var i = 0; i < command2.length; i++) {
              var c = command2.charAt(i);
              if (c == "\"") {
                escapedCommand2 += "\\\"";
              } else if (c == "\\") {
                escapedCommand2 += "\\\\";
              } else {
                escapedCommand2 += c;
              }
            }        
            script += "def " + optionName_formatted + "():\n";
            script += "    print('You selected " + optionName + "')\n";
            script += "    " + optionName_formatted + " = f\"" + escapedCommand2 + "\"\n";
            script += "    try:\n";
            script += "        os.system(" + optionName_formatted + ")\n";
            script += "    except KeyboardInterrupt:\n";
            script += "        print('" + optionName + " interrupted by user')\n";
            script += "    input('Press enter to return to menu...')\n\n";
        }
        if (uniqueMatches.length > 0) {
          uniqueMatches.forEach((match, index) => {
            script += `def set_${match}():
            global ${match}
            ${match} = input('Enter a new ${match}:')
            input('Press enter to return to menu...')
        
        `;
            if (index !== uniqueMatches.length - 1) {
              script += '\n';
            }
          });
        }        
        script += "\n";
        script += "def exit_menu():\n";
        script += "    print('Goodbye!')\n";
        script += "    exit()\n\n";
        script += "###===Enter Your Choice And Then It Will Activate That Option===###\n";
        script += "if __name__ == '__main__':\n";
        script += "    while True:\n";
        script += "        menu()\n";
        script += "        choice = input('Enter your choice: ')\n";
        // Create an array to hold all of the formatted option names
        var optionNamesFormatted = [];
        
        // Generate the `if` statements for each option
        for (var i = 0; i <= optionCount; i++) {
          var optionName, command;
          if (i == 0) {
            optionName = defaultOption_formatted;
            command = defaultCommand;
          } else {
            optionName = document.getElementById("option" + i).value;
            command = document.getElementById("command" + i).value;
          }
          var optionNameFormatted = optionName.replace(/[^a-zA-Z0-9 ]/g, "").replace(/ /g, "_");
          var defaultOptionFormatted = defaultOption.replace(/[^a-zA-Z0-9 ]/g, "").replace(/\s+/g, "_");
          if (i == 0) {
            optionNameFormatted = defaultOptionFormatted;
          }
          optionNamesFormatted.push(optionNameFormatted);
          script += "        if choice == '" + (i+1) + "':\n";
          script += "            " + optionNameFormatted + "()\n";
        }        
        // Generate the `if` statements for each option
        if (uniqueMatches.length > 0) {
          uniqueMatches.forEach((match, index) => {
            const matchFormatted = match.replace(/[^a-zA-Z0-9]/g, ""); // remove non-alphanumeric characters from match
            script += `        if choice == 'set_${matchFormatted}':\n`;
            script += `            set_${match}()\n`;
          });
        }
        script += "        elif choice.lower() == 'exit':\n";
        script += "            exit_menu()\n";
        script += "        else:\n";
        script += "            print('Invalid choice. Try again.')\n";
        for (var i = 1; i <= optionCount; i++) {
          var optionName = document.getElementById("option" + i).value;
          options.push(optionName);
        }
        document.getElementById("script").value = script;              }

      function resetOptions() {
        // Remove all dynamically added menu option fields
        for (var i = 1; i <= optionCount; i++) {
          document.getElementById("optionDiv" + i).remove();
        }
      
        // Recreate the original menu option fields

        optionCount = 0;
        menuOptionNumber = 1;
        options = [];
        
        // Set textarea to blank
        document.getElementById("script").value = "";
      }      
      </script>
  </body>
</html>
